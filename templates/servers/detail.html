{% extends 'base.html' %}

{% block title %}{{ server.name }} - SimpleX Test Suite{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="flex justify-between items-start mb-6">
        <div>
            <h1 class="text-2xl font-bold text-slate-900 dark:text-white flex items-center space-x-3">
                <span>{{ server.name }}</span>
            </h1>
            <p class="text-slate-500 dark:text-slate-400 text-sm mt-1">{{ server.server_type|upper }} Server</p>
        </div>
        <div class="flex items-center space-x-3">
            <span class="px-3 py-1.5 rounded-full text-sm font-medium {% if server.is_active %}bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400{% else %}bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400{% endif %}">
                {% if server.is_active %}
                    <span x-show="lang === 'en'">Active</span>
                    <span x-show="lang === 'de'" x-cloak>Aktiv</span>
                {% else %}
                    <span x-show="lang === 'en'">Inactive</span>
                    <span x-show="lang === 'de'" x-cloak>Inaktiv</span>
                {% endif %}
            </span>
            <button hx-post="{% url 'servers:toggle' server.pk %}"
                    hx-target="#server-{{ server.pk }}"
                    class="bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300 px-4 py-1.5 rounded-lg transition-colors text-sm font-medium">
                {% if server.is_active %}
                    <span x-show="lang === 'en'">Disable</span>
                    <span x-show="lang === 'de'" x-cloak>Deaktivieren</span>
                {% else %}
                    <span x-show="lang === 'en'">Enable</span>
                    <span x-show="lang === 'de'" x-cloak>Aktivieren</span>
                {% endif %}
            </button>
        </div>
    </div>

    <div class="bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm mb-6">
        <h2 class="text-lg font-semibold text-slate-900 dark:text-white mb-5">
            <span x-show="lang === 'en'">Server Details</span>
            <span x-show="lang === 'de'" x-cloak>Server Details</span>
        </h2>
        
        <dl class="space-y-5">
            <div>
                <dt class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1">
                    <span x-show="lang === 'en'">Full Address</span>
                    <span x-show="lang === 'de'" x-cloak>Vollständige Adresse</span>
                </dt>
                <dd class="text-slate-900 dark:text-white font-mono text-sm bg-slate-50 dark:bg-slate-800 p-3 rounded-lg break-all">
                    {{ server.address }}
                </dd>
            </div>
            
            <div>
                <dt class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1">
                    <span x-show="lang === 'en'">Onion Address</span>
                    <span x-show="lang === 'de'" x-cloak>Onion Adresse</span>
                </dt>
                <dd class="text-slate-900 dark:text-white font-mono text-sm bg-slate-50 dark:bg-slate-800 p-3 rounded-lg">
                    {{ server.onion_address }}
                </dd>
            </div>
            
            <div class="grid grid-cols-2 gap-5">
                <div>
                    <dt class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1">Status</dt>
                    <dd class="mt-1">
                        <span class="px-2.5 py-1 rounded-full text-sm font-medium
                            {% if server.last_status == 'online' %}bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400
                            {% elif server.last_status == 'offline' %}bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400
                            {% elif server.last_status == 'error' %}bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400
                            {% else %}bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400{% endif %}">
                            {{ server.get_last_status_display }}
                        </span>
                    </dd>
                </div>
                <div>
                    <dt class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1">
                        <span x-show="lang === 'en'">Last Check</span>
                        <span x-show="lang === 'de'" x-cloak>Letzter Check</span>
                    </dt>
                    <dd class="text-slate-900 dark:text-white mt-1">
                        {% if server.last_check %}
                        {{ server.last_check|date:"M d, Y H:i:s" }}
                        {% else %}
                        <span class="text-slate-500">—</span>
                        {% endif %}
                    </dd>
                </div>
            </div>
            
            <div class="grid grid-cols-2 gap-5">
                <div>
                    <dt class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1">
                        <span x-show="lang === 'en'">Created</span>
                        <span x-show="lang === 'de'" x-cloak>Erstellt</span>
                    </dt>
                    <dd class="text-slate-900 dark:text-white">{{ server.created_at|date:"M d, Y H:i" }}</dd>
                </div>
                <div>
                    <dt class="text-slate-500 dark:text-slate-400 text-sm font-medium mb-1">
                        <span x-show="lang === 'en'">Updated</span>
                        <span x-show="lang === 'de'" x-cloak>Aktualisiert</span>
                    </dt>
                    <dd class="text-slate-900 dark:text-white">{{ server.updated_at|date:"M d, Y H:i" }}</dd>
                </div>
            </div>
        </dl>
    </div>

    <div class="flex space-x-3">
        <a href="{% url 'servers:list' %}"
           class="bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300 px-4 py-2 rounded-lg transition-colors font-medium">
            <span x-show="lang === 'en'">← Back to List</span>
            <span x-show="lang === 'de'" x-cloak>← Zurück zur Liste</span>
        </a>
        <button hx-delete="{% url 'servers:delete' server.pk %}"
                hx-confirm="Delete this server?"
                class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors font-medium">
            <span x-show="lang === 'en'">Delete Server</span>
            <span x-show="lang === 'de'" x-cloak>Server löschen</span>
        </button>
    </div>
</div>
{% endblock %}
